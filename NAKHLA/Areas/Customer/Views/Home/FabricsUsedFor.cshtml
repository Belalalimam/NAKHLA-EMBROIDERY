@model List<Product>

@{
    ViewData["Title"] = ViewBag.Title;
}

<!-- ===== Page Header ===== -->
<div class="container my-5">
    <h1 class="fw-bold text-center">
        @ViewBag.Title
    </h1>
    <p class="text-center text-muted mt-2">
        Choose the fabrics best suited to your project
    </p>
</div>

<!-- ===== Products Grid ===== -->
<div class="container">
    @if (Model != null && Model.Any())
    {
        <div class="row g-4">
            @foreach (var product in Model)
            {
                <div class="col-xl-3 col-lg-4 col-md-6 col-sm-12">
                    <div class="card h-100 border-0 shadow-sm product-card">

                        <!-- Image -->
                        <div class="product-image">
                            <img src="~/images/@product.MainImage"
                                 class="card-img-top"
                                 alt="@product.Name">
                        </div>

                        <!-- Body -->
                        <div class="card-body d-flex flex-column">
                            <h6 class="fw-bold mb-2">
                                @product.Name
                            </h6>

                            <small class="text-muted mb-1">
                                Fabric type:
                                <strong>@product.FabricType?.Name</strong>
                            </small>

                            <small class="text-muted mb-3">
                                Used for:
                                @string.Join(", ", product.ProjectCategories.Select(c => c.Name))
                            </small>

                            <div class="mt-auto">
                                <a asp-controller="Home"
                                   asp-action="Details"
                                   asp-route-id="@product.Id"
                                   class="btn btn-outline-dark w-100">
                                    View Details
                                </a>
                            </div>
                        </div>

                    </div>
                </div>
            }
        </div>
    }
    else
    {
        <div class="alert alert-warning text-center">
            No products found for this category.
        </div>
    }
</div>
